From 21860e3f15fcde63ccb8c9e7400ab649296b864e Mon Sep 17 00:00:00 2001
From: Kexy Biscuit <kexybiscuit@aosc.io>
Date: Fri, 26 Jul 2024 05:30:40 +0800
Subject: [PATCH 08/31] [Debian] stats-collector.patch

reported upstream: https://issues.chromium.org/issues/330361615

The forward header includes the declaration of deallocate(), but not the
definition. Since the definition is in a header (and presumably it gets
inlined by the compiler), the definition doesn't actually end up in an
object file unless the non-forward header gets included. Not having the
definition makes the linker sad.

https://salsa.debian.org/chromium-team/chromium/-/blob/cedbbb573810840223e80ecd7a8e5d5953321bfe/debian/patches/fixes/stats-collector.patch

Co-authored-by: Andres Salomon <dilinger@queued.net>
---
 .../src/partition_alloc/starscan/stats_collector.h              | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/base/allocator/partition_allocator/src/partition_alloc/starscan/stats_collector.h b/base/allocator/partition_allocator/src/partition_alloc/starscan/stats_collector.h
index 055a6f8bbf..82c5a5099a 100644
--- a/base/allocator/partition_allocator/src/partition_alloc/starscan/stats_collector.h
+++ b/base/allocator/partition_allocator/src/partition_alloc/starscan/stats_collector.h
@@ -14,7 +14,7 @@
 #include <unordered_map>
 #include <utility>
 
-#include "partition_alloc/internal_allocator_forward.h"
+#include "partition_alloc/internal_allocator.h"
 #include "partition_alloc/partition_alloc_base/threading/platform_thread.h"
 #include "partition_alloc/partition_alloc_base/time/time.h"
 #include "partition_alloc/partition_alloc_check.h"
-- 
2.45.2

