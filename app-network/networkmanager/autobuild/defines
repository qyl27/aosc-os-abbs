PKGNAME=networkmanager
PKGSEC=admin
PKGDEP="systemd nss dbus-glib util-linux iproute2 libnl polkit \
        wpa-supplicant dhcp modemmanager newt libndp iwd libteam"
PKGDEP__RETRO="systemd util-linux iproute2 libnl \
               wpa-supplicant dhcpcd newt libndp"
PKGDEP__ARMV4="${PKGDEP__RETRO}"
PKGDEP__ARMV6HF="${PKGDEP__RETRO}"
PKGDEP__ARMV7HF="${PKGDEP__RETRO}"
PKGDEP__I486="${PKGDEP__RETRO}"
PKGDEP__LOONGSON2F="${PKGDEP__RETRO}"
PKGDEP__M68K="${PKGDEP__RETRO}"
PKGDEP__POWERPC="${PKGDEP__RETRO}"
PKGDEP__PPC64="${PKGDEP__RETRO}"
PKGSUG__RETRO="modemmanager"
PKGSUG__ARMV4="${PKGSUG__RETRO}"
PKGSUG__ARMV6HF="${PKGSUG__RETRO}"
PKGSUG__ARMV7HF="${PKGSUG__RETRO}"
PKGSUG__I486="${PKGSUG__RETRO}"
PKGSUG__LOONGSON2F="${PKGSUG__RETRO}"
PKGSUG__M68K="${PKGSUG__RETRO}"
PKGSUG__POWERPC="${PKGSUG__RETRO}"
PKGSUG__PPC64="${PKGSUG__RETRO}"
BUILDDEP="pygobject-3 gtk-doc vala intltool gobject-introspection \
          ofono vim"
BUILDDEP__RETRO="intltool libxslt modemmanager"
BUILDDEP__ARMV4="${BUILDDEP__RETRO}"
BUILDDEP__ARMV6HF="${BUILDDEP__RETRO}"
BUILDDEP__ARMV7HF="${BUILDDEP__RETRO}"
BUILDDEP__I486="${BUILDDEP__RETRO}"
BUILDDEP__LOONGSON2F="${BUILDDEP__RETRO}"
BUILDDEP__M68K="${BUILDDEP__RETRO}"
BUILDDEP__POWERPC="${BUILDDEP__RETRO}"
BUILDDEP__PPC64="${BUILDDEP__RETRO}"
PKGDES="Network Management daemon, originally a GNOME project"

ABTYPE=meson
# Turn off LTO for mips64r6el or it will eat out RAM of QEMU host.
NOLTO__MIPS64R6EL=1

# Note: We still use wpa_supplicant by default, we find it more reliable.
MESON_AFTER="-Dsession_tracking_consolekit=false \
             -Dsession_tracking=systemd \
             -Dsuspend_resume=systemd \
             -Dpolkit=true \
             -Dconfig_auth_polkit_default=default \
             -Dmodify_system=true \
             -Dselinux=false \
             -Dsystemd_journal=true \
             -Dconfig_logging_backend_default=journal \
             -Dconfig_wifi_backend_default=wpa_supplicant \
             -Dhostname_persist=default \
             -Dlibaudit=no \
             -Dwext=true \
             -Dwifi=true \
             -Diwd=false \
             -Dppp=true \
             -Dmodem_manager=true \
             -Dofono=true \
             -Dconcheck=true \
             -Dteamdctl=true \
             -Dovs=true \
             -Dnmcli=true \
             -Dnmtui=true \
             -Dnm_cloud_setup=true \
             -Dbluez5_dun=true \
             -Debpf=true \
             -Difcfg_rh=false \
             -Difupdown=false \
             -Dconfig_dhcp_default=internal \
             -Dintrospection=true \
             -Dvapi=true \
             -Ddocs=true \
             -Dfirewalld_zone=true \
             -Dmore_asserts=no \
             -Dmore_logging=false \
             -Dvalgrind=no \
             -Dld_gc=true \
             -Dlibpsl=true \
             -Dcrypto=nss \
             -Dqt=false \
             -Dreadline=auto \
             -Dconfig_dns_rc_manager_default=auto \
             -Dresolvconf=no"
MESON_AFTER__RETRO=" \
             ${MESON_AFTER} \
             -Dofono=false \
             -Dconcheck=true \
             -Dteamdctl=false \
             -Dovs=false \
             -Dnm_cloud_setup=false \
             -Dbluez5_dun=false \
             -Debpf=false \
             -Dintrospection=false \
             -Dvapi=false \
             -Ddocs=false \
             -Dfirewalld_zone=false \
             -Dlibpsl=false \
             -Dcrypto=gnutls"
MESON_AFTER__ARMV4="${MESON_AFTER__RETRO}"
MESON_AFTER__ARMV6HF="${MESON_AFTER__RETRO}"
MESON_AFTER__ARMV7HF="${MESON_AFTER__RETRO}"
MESON_AFTER__I486="${MESON_AFTER__RETRO}"
MESON_AFTER__LOONGSON2F="${MESON_AFTER__RETRO}"
MESON_AFTER__M68K="${MESON_AFTER__RETRO}"
MESON_AFTER__POWERPC="${MESON_AFTER__RETRO}"
MESON_AFTER__PPC64="${MESON_AFTER__RETRO}"

PKGESS=1
